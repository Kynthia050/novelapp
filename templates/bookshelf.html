<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>My Shelf ‚Äî Bookshelf</title>
</head>
<body>
  <main>

{% block content %}
<style>
  @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+Thai:wght@400;500;700&display=swap');

  :root{
    --bg:#222;
    --text:#eee;
    --muted:#bbb;
    --panel:rgba(34,34,34,.9);
    --card:#2a2a2d;
    --line:rgba(255,255,255,.08);
    --soft:#444;
    --brand:#fff;
    --ok:#00e0cc;
    --star:#ffe402;
    --radius:16px;
    --shadow:0 10px 24px rgba(0,0,0,.45);
  }

  *{box-sizing:border-box}
  html,body{height:100%}
  body{
    margin:0;
    font-family:'Noto Sans Thai',system-ui,-apple-system,'Segoe UI',Roboto,Arial,sans-serif;
    background: var(--bg) url('/static/img/bg-login.jpg') center/cover fixed no-repeat;
    color:var(--text);
    line-height:1.6;
  }

  header{
    position:sticky;
    top:0;
    z-index:20;
    background:rgba(34,34,34,.85);
    backdrop-filter:blur(6px);
    border-bottom:1px solid var(--line)
  }
  .nav{
    max-width:1200px;
    margin:0 auto;
    padding:14px 20px;
    display:flex;
    justify-content:center
  }
  .brand{
    font-family: Georgia, 'Times New Roman', serif;
    font-size:2rem;
    letter-spacing:.25em;
    font-weight:700
  }

  .site{
    max-width:1200px;
    margin:0 auto;
    padding:22px
  }
  .panel{
    background:var(--panel);
    border:1px solid var(--line);
    border-radius:var(--radius);
    box-shadow:var(--shadow);
    padding:20px
  }

  .fav-head{
    display:flex;
    align-items:center;
    gap:14px;
    margin-bottom:12px
  }
  .fav-title{
    font-family: Georgia, 'Times New Roman', serif;
    letter-spacing:.35em;
    font-size:clamp(20px,3vw,32px)
  }
  .book{
    width:48px;
    height:48px;
    border-radius:999px;
    background:#dcdcdc;
    display:grid;
    place-items:center;
    color:#e57c8e
  }

  .toolbar{
    display:flex;
    gap:14px;
    align-items:center;
    flex-wrap:wrap;
    margin-bottom:14px
  }
  .pill{
    padding:8px 12px;
    border:1px solid var(--line);
    border-radius:999px;
    background:#111214;
    color:var(--text);
    cursor:pointer;
    text-decoration:none;
    font-size:.9rem;
    white-space:nowrap;
  }
  .pill.active{
    background:#fff;
    color:#000;
    border-color:#fff
  }

  .select{
    appearance:none;
    background:#111214;
    color:var(--text);
    border:1px solid var(--line);
    padding:10px 12px;
    border-radius:10px;
    font-size:.9rem;
  }

  .shelf-list{
    display:grid;
    gap:16px
  }
  @media(min-width:920px){
    .shelf-list{grid-template-columns:1fr 1fr}
  }

  .row{
    display:flex;
    gap:14px;
    align-items:flex-start;
    background:var(--card);
    border:1px solid var(--line);
    border-radius:14px;
    padding:12px
  }
  .row .cover{
    flex:0 0 110px;
    height:110px;
    border-radius:10px;
    object-fit:cover;
    background:#cfcfd2
  }
  .row .meta{flex:1}
  .row .titleline{
    display:flex;
    align-items:center;
    justify-content:space-between;
    gap:10px
  }
  .row .name{
    font-weight:700;
    letter-spacing:.08em;
    font-size:0.95rem;
  }
  .row .author{
    color:var(--muted);
    font-size:.9rem
  }
  .stats{
    display:flex;
    gap:12px;
    color:var(--muted);
    font-size:.85rem;
    margin-top:6px;
    align-items:center;
    flex-wrap:wrap;
  }
  .stars{
    display:flex;
    gap:4px;
    align-items:center;
  }
  .star{
    font-size:0.9rem;
    color:#999
  }
  .star.on{
    color:var(--star)
  }
  .read-btn{
    margin-left:auto;
    background:#00c4b4;
    color:#fff;
    border:0;
    border-radius:999px;
    padding:6px 12px;
    cursor:pointer;
    font-size:.85rem;
    text-decoration:none;
    white-space:nowrap;
  }
  .read-btn:hover{
    opacity:.92;
  }

  .muted{color:var(--muted);font-size:.9rem}
</style>

<header>
  <div class="nav">
    <div class="brand">MY SHELF</div>
  </div>
</header>

<main class="site">
  <!-- Title -->
  <div class="fav-head">
    <h2 id="fav-title" class="fav-title">‡∏ä‡∏±‡πâ‡∏ô‡∏´‡∏ô‡∏±‡∏á‡∏™‡∏∑‡∏≠</h2>
    <div class="book">üìö</div>
  </div>

  <!-- Panel -->
  <section class="panel" style="margin-top:16px" aria-label="bookshelf">
    <!-- Toolbar -->
    <div class="toolbar" style="margin-bottom:6px">
      <!-- Tab pills: ‡∏™‡πà‡∏á‡∏Ñ‡πà‡∏≤ tab ‡πÅ‡∏•‡∏∞‡∏Ñ‡∏á‡∏Ñ‡πà‡∏≤ status ‡πÄ‡∏î‡∏¥‡∏° -->
      <a
        href="{{ url_for('bookshelf.bookshelf_index', tab='favorite', status=status_filter) }}"
        class="pill {% if active_tab == 'favorite' %}active{% endif %}">
        ‡∏ô‡∏¥‡∏¢‡∏≤‡∏¢‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡πÇ‡∏õ‡∏£‡∏î
      </a>

      <a
        href="{{ url_for('bookshelf.bookshelf_index', tab='recent', status=status_filter) }}"
        class="pill {% if active_tab == 'recent' %}active{% endif %}">
        ‡∏≠‡πà‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î
      </a>

      <a
        href="{{ url_for('bookshelf.bookshelf_index', tab='rated', status=status_filter) }}"
        class="pill {% if active_tab == 'rated' %}active{% endif %}">
        ‡∏ï‡∏¥‡∏î‡∏î‡∏≤‡∏ß‡πÅ‡∏•‡πâ‡∏ß
      </a>

      <div style="flex:1"></div>

      <!-- Status filter: submit ‡πÅ‡∏ö‡∏ö GET ‡∏û‡∏£‡πâ‡∏≠‡∏° tab ‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô -->
      <form method="get" id="statusForm">
        <input type="hidden" name="tab" value="{{ active_tab }}">
        <select id="filter" class="select" name="status" onchange="this.form.submit()">
          <option value="all" {% if status_filter == 'all' %}selected{% endif %}>‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</option>
          <option value="continue" {% if status_filter == 'continue' %}selected{% endif %}>‡∏≠‡πà‡∏≤‡∏ô‡∏ï‡πà‡∏≠</option>
          <option value="done" {% if status_filter == 'done' %}selected{% endif %}>‡∏à‡∏ö‡πÅ‡∏•‡πâ‡∏ß</option>
        </select>
      </form>
    </div>

    <!-- Shelf list -->
    <div class="shelf-list">
      {% if items and items|length > 0 %}
        {% for b in items %}
        <article class="row">
          <img class="cover" src="{{ b.cover }}" alt="cover of {{ b.title }}" />
          <div class="meta">
            <div class="titleline">
              <div class="name">{{ b.title }}</div>
              <a class="read-btn" href="{{ b.read_url }}">‡∏≠‡πà‡∏≤‡∏ô‡∏ï‡πà‡∏≠</a>
            </div>
            <div class="author">by {{ b.author_name }}</div>
            <div class="stats">
              <span>üìÑ {{ b.total_chapters }} ‡∏ï‡∏≠‡∏ô</span>
              {% if b.progress %}
                <span>üìñ ‡∏≠‡πà‡∏≤‡∏ô‡πÑ‡∏õ‡πÅ‡∏•‡πâ‡∏ß {{ b.progress }}%</span>
              {% endif %}
              <span class="stars">
                {% for s in range(1,6) %}
                  <span class="star {% if b.avg_rating >= s - 0.5 %}on{% endif %}">‚òÖ</span>
                {% endfor %}
                {% if b.rating_count %}
                  <span class="muted">({{ b.rating_count }})</span>
                {% endif %}
              </span>
            </div>
          </div>
        </article>
        {% endfor %}
      {% else %}
        <p class="muted">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÉ‡∏ô‡∏ä‡∏±‡πâ‡∏ô‡∏´‡∏ô‡∏±‡∏á‡∏™‡∏∑‡∏≠</p>
      {% endif %}
    </div>
  </section>
</main>
{% endblock %}

  </main>
</body>
</html>
